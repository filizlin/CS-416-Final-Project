<!DOCTYPE html>
<script src="http://d3js.org/d3.v4.min.js"></script>
<style>
  circle {
    fill: lightblue;
    stroke: black;
  }
  .axis {
    font: 14px sans-serif;
  }
</style>
<html>
  <body onload="init()">
    <svg></svg>
    <script>
      async function init() {
        //load data
        const data = await d3.csv(
          "https://raw.githubusercontent.com/filizlin/CS-416-Final-Project/main/Ethnic%20data.csv",
          function (error, data) {
            console.log(data);
          }
        );

        //set up x, y, and color scaling
        var margin = { top: 10, right: 10, bottom: 20, left: 20 },
          width = 700 + margin.top + margin.bottom,
          height = 600 + margin.left + margin.right;
        var x = d3
          .scaleLinear()
          .domain([2015, 2021])
          .range([margin.top, height - margin.bottom]);
        var y = d3
          .scaleLinear()
          .domain([0, 100])
          .range([height - margin.bottom, margin.top]);
        var color = d3
          .scaleOrdinal()
          .domain([
            "Overall",
            "American Indian/Alaska Native",
            "Asian",
            "Black or African American",
            "Filipino",
            "Hispanic",
            "Pacific Islander or Hawaiian Native",
            "White",
            "Two or More Races",
            "Unknown/Non-Respondent",
          ])
          .range(d3.schemeTableau10);

        // create the container SVG element
        d3.select("svg")
          .attr("width", width + 100)
          .attr("height", height + 100);

        // add circle elements for each dot
        const enthic_groups = d3
          .select("svg")
          .append("g")
          .attr("transform", `translate(${5 * margin.left},${margin.top})`)
          .selectAll("circle")
          .data(data)
          .enter()
          .append("circle")
          .attr("cx", function (d) {
            return x(d.academicYear);
          })
          .attr("cy", function (d) {
            return y(d.perc);
          })
          .attr("r", 1.5);

        // set up y-axis
        d3.select("svg")
          .append("g")
          .attr("class", "axis")
          .attr("transform", `translate(${5 * margin.left},${margin.top})`)
          .call(
            d3
              .axisLeft(y)
              .tickValues([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100])
          )
          .append("text")
          .attr("transform", `translate(-${5 * margin.left}, 450) rotate(-90)`)
          .attr("text-anchor", "end")
          .attr("fill", "black")
          .attr("font-size", "16px")
          .attr("x", width * 0.5)
          .attr("y", +50)
          .text("Percent Completion of Transfer-level Math and English Course");

        //set up x-axis
        d3.select("svg")
          .append("g")
          .attr("class", "axis")
          .attr(
            "transform",
            `translate(${4.5 * margin.left}, ${height - margin.top})`
          )
          .call(
            d3
              .axisBottom(x)
              .tickValues([2015, 2016, 2017, 2018, 2019, 2020, 2021])
              .tickSize(16)
              .tickFormat(d3.format("d"))
          )
          .append("text")
          .attr("text-anchor", "end")
          .attr("fill", "black")
          .attr("font-size", "16px")
          .attr("x", width * 0.5)
          .attr("y", +60)
          .text("Academic Year");
      }
    </script>
  </body>
</html>
